language: rust
sudo: required
rust:
    - stable
    - beta
    - nightly
before_install:
    - rustup self update

install:
    - pip install ubus_simulator/.
    - make install
    - cargo install cross
    - rustup target add armv7-unknown-linux-musleabi
script:
    - make test
    - make release
matrix:
    allow_failures:
        - rust: nightly
    fast_finish: true
